(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function t(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(l){if(l.ep)return;l.ep=!0;const s=t(l);fetch(l.href,s)}})();const y=document.querySelector(".game-container"),L=document.getElementById("restart"),v=document.getElementById("scoreContainer"),p=document.getElementById("gameOverOverlay");let r,i=4,c=4,f=0;r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];function w(){for(let e=0;e<i;e++)for(let o=0;o<c;o++){const t=document.createElement("div");t.classList.add("tile"),t.id=e.toString()+"-"+o.toString();let n=r[e][o];C(t,n),y.appendChild(t)}d(),d(),u()}function C(e,o,t,n){e.innerText="",e.classList.value="",e.classList.add("tile"),e.classList.add(`pos-${t}-${n}`),o>0&&(e.innerText=o,o<=4096?e.classList.add("t"+o.toString()):e.classList.add("t8192"))}function u(){const e=document.querySelectorAll(".tile");let o=0;for(let t=0;t<i;t++)for(let n=0;n<c;n++){const l=e[o],s=r[t][n];l.innerText=s===0?"":s,l.className="tile t"+s+" pos-"+t+"-"+n,o++}v.innerText=f.toString(),console.log(f)}document.addEventListener("keyup",e=>{e.code=="ArrowLeft"&&(b(),console.log("left")),e.code=="ArrowRight"&&(E(),console.log("right")),e.code=="ArrowUp"&&(S(),console.log("Up")),e.code=="ArrowDown"&&(T(),console.log("Down"))});function O(e){let o=[],t=!1;for(let n=0;n<e.length;n++)if(e[n]!==0){let l=n+1;for(;l<e.length&&e[l]===0;)l++;l<e.length&&e[n]===e[l]&&!t?(o.push(e[n]*2),e[l]=0,t=!0,f+=e[n]*2,u()):(o.push(e[n]),t=!1)}for(;o.length<e.length;)o.push(0);return o}function d(){const e=[];for(let o=0;o<i;o++)for(let t=0;t<c;t++)r[o][t]===0&&e.push({row:o,col:t});if(e.length>0){const o=e[Math.floor(Math.random()*e.length)];r[o.row][o.col]=2}}function b(){for(let e=0;e<i;e++)for(let o=1;o<c;o++)if(r[e][o]!==0){let t=o-1;for(;t>=0&&r[e][t]===0;)t--;t>=0&&r[e][o]===r[e][t]?(r[e][t]*=2,r[e][o]=0,f+=r[e][t]):r[e][t+1]===0&&(r[e][t+1]=r[e][o],r[e][o]=0)}d(),u(),a(),g()}function E(){for(let e=0;e<i;e++)for(let o=c-2;o>=0;o--)if(r[e][o]!==0){let t=o+1;for(;t<c&&r[e][t]===0;)t++;t<c&&r[e][o]===r[e][t]?(r[e][t]*=2,r[e][o]=0,f+=r[e][t]):r[e][t-1]===0&&(r[e][t-1]=r[e][o],r[e][o]=0)}d(),u(),a(),g()}function S(){for(let e=0;e<c;e++)for(let o=1;o<i;o++)if(r[o][e]!==0){let t=o-1;for(;t>=0;){if(r[t][e]===0)r[t][e]=r[o][e],r[o][e]=0,o=t;else if(r[t][e]===r[o][e]){r[t][e]*=2,r[o][e]=0,f+=r[t][e];break}else break;t--}}d(),u(),a(),g()}function T(){const e=M(r);for(let t=0;t<i;t++)e[t]=O(e[t]);const o=B(e);for(let t=0;t<i;t++)for(let n=0;n<c;n++)r[t][n]=o[t][n];d(),u(),a(),g()}function B(e){const o=e.length,t=e[0].length;for(let n=0;n<o;n++)for(let l=0;l<Math.floor(t/2);l++)[e[n][l],e[n][t-1-l]]=[e[n][t-1-l],e[n][l]];for(let n=0;n<o;n++)for(let l=n+1;l<t;l++)[e[n][l],e[l][n]]=[e[l][n],e[n][l]];return e}function M(e){const o=e.length,t=e[0].length;for(let n=0;n<o;n++)for(let l=n+1;l<t;l++)[e[n][l],e[l][n]]=[e[l][n],e[n][l]];for(let n=0;n<o;n++)for(let l=0;l<Math.floor(t/2);l++)[e[n][l],e[n][t-1-l]]=[e[n][t-1-l],e[n][l]];return e}L.addEventListener("click",m);function m(){p.classList.add("hidden"),r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],f=0,d(),d(),u()}function a(){const e=document.getElementById("winOverlay");f===2048&&(e.classList.remove("hidden"),setTimeout(()=>{e.classList.add("hidden")},1e3))}function g(){let e=!0;for(let o=0;o<i;o++){for(let t=0;t<c;t++)if(r[o][t]===0){e=!1;break}if(!e)break}if(e){for(let o=0;o<i;o++)for(let t=0;t<c;t++)if(o-1>=0&&r[o][t]===r[o-1][t]||o+1<i&&r[o][t]===r[o+1][t]||t-1>=0&&r[o][t]===r[o][t-1]||t+1<c&&r[o][t]===r[o][t+1])return!1;return p.classList.remove("hidden"),setTimeout(m,2e3),!0}else return!1}console.log(`board : ${r}`);w();
